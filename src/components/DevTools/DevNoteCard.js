import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from "react/jsx-runtime";
import { useTranslation } from 'react-i18next';
import { MoreVertical } from 'lucide-react';
import { Card, CardContent, CardFooter } from '@/components/common/shadcn/card';
import { Separator } from '@/components/common/shadcn/separator';
import { ContextMenu, ContextMenuContent, ContextMenuItem, ContextMenuSub, ContextMenuSubContent, ContextMenuSubTrigger, ContextMenuTrigger, } from '@/components/common/shadcn/context-menu';
import { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuSub, DropdownMenuSubContent, DropdownMenuSubTrigger, DropdownMenuTrigger, } from '@/components/common/shadcn/dropdown-menu';
import { cn } from '@/shared';
import { PRIORITY_CONFIG } from './config/devNotesConfig';
export const DevNoteCard = ({ note, isFocused, canEdit, typeConfig, statusConfig, onFocus, onInspect, onDoubleClick, onStatusChange, onDelete, formatDate, getStatusDisplayName, }) => {
    const { t } = useTranslation('common');
    const TypeIcon = typeConfig.icon;
    return (_jsxs(ContextMenu, { children: [_jsx(ContextMenuTrigger, { asChild: true, children: _jsxs(Card, { className: cn('bg-muted border-l-[4px] border-t-[1px] cursor-pointer transition-all duration-200 relative text-xs', 'hover:bg-[#1a1612]', isFocused
                        ? 'border-fm-gold'
                        : 'border-border hover:border-fm-gold/50', typeConfig.borderColor), onClick: onFocus, onDoubleClick: onDoubleClick, children: [_jsx("div", { className: cn('absolute left-0 top-0 w-6 h-6 border border-border flex items-center justify-center', typeConfig.color), children: _jsx(TypeIcon, { className: 'h-3 w-3 m-0' }) }), _jsx("div", { className: cn('absolute left-[22px] top-[2px] w-2 h-2 rounded-full border border-background', statusConfig.color), title: statusConfig.label }), _jsxs(CardContent, { className: 'p-[8px] pl-[32px] space-y-[8px]', children: [_jsx("div", { className: 'flex items-start justify-end -mt-1', children: _jsxs(DropdownMenu, { children: [_jsx(DropdownMenuTrigger, { asChild: true, children: _jsx("button", { className: 'hover:text-fm-gold transition-colors focus:outline-none', onClick: e => e.stopPropagation(), children: _jsx(MoreVertical, { className: 'h-3 w-3 text-muted-foreground flex-shrink-0 hover:text-fm-gold' }) }) }), _jsxs(DropdownMenuContent, { className: 'bg-card border-border rounded-none w-48', children: [_jsx(DropdownMenuItem, { onSelect: onInspect, className: 'text-white hover:bg-muted focus:bg-muted cursor-pointer', children: t('devNotes.inspect') }), canEdit && (_jsxs(_Fragment, { children: [_jsxs(DropdownMenuSub, { children: [_jsx(DropdownMenuSubTrigger, { className: 'text-white hover:bg-muted focus:bg-muted cursor-pointer', children: t('devNotes.setStatus') }), _jsxs(DropdownMenuSubContent, { className: 'bg-card border-border rounded-none w-40', children: [_jsx(DropdownMenuItem, { onSelect: () => onStatusChange('TODO'), className: 'text-white hover:bg-muted focus:bg-muted cursor-pointer', children: getStatusDisplayName('TODO') }), _jsx(DropdownMenuItem, { onSelect: () => onStatusChange('IN_PROGRESS'), className: 'text-white hover:bg-muted focus:bg-muted cursor-pointer', children: getStatusDisplayName('IN_PROGRESS') }), _jsx(DropdownMenuItem, { onSelect: () => onStatusChange('RESOLVED'), className: 'text-white hover:bg-muted focus:bg-muted cursor-pointer', children: getStatusDisplayName('RESOLVED') }), _jsx(DropdownMenuItem, { onSelect: () => onStatusChange('ARCHIVED'), className: 'text-white hover:bg-muted focus:bg-muted cursor-pointer', children: getStatusDisplayName('ARCHIVED') }), _jsx(DropdownMenuItem, { onSelect: () => onStatusChange('CANCELLED'), className: 'text-white hover:bg-muted focus:bg-muted cursor-pointer', children: getStatusDisplayName('CANCELLED') })] })] }), _jsx(DropdownMenuItem, { onSelect: onDelete, className: 'text-red-400 hover:bg-muted focus:bg-muted cursor-pointer', children: t('actions.delete') })] }))] })] }) }), _jsx("p", { className: 'text-xs text-white leading-snug line-clamp-3 px-2 whitespace-pre-wrap', children: note.message })] }), _jsx(Separator, { className: 'bg-border/50' }), _jsxs(CardFooter, { className: 'p-[8px] pl-[32px] pt-[6px] flex items-center justify-between text-[10px] text-muted-foreground', children: [_jsxs("div", { className: 'flex items-center gap-2', children: [_jsx("span", { className: 'font-medium text-fm-gold', children: note.author_name }), _jsxs("span", { className: cn('text-[9px] font-medium', PRIORITY_CONFIG[note.priority || 3]?.color), children: ["P", note.priority || 3] })] }), _jsx("span", { children: formatDate(note.created_at) })] })] }) }), _jsxs(ContextMenuContent, { className: 'bg-card border-border rounded-none w-48', children: [_jsx(ContextMenuItem, { onSelect: onInspect, className: 'text-white hover:bg-muted focus:bg-muted cursor-pointer', children: t('devNotes.inspect') }), canEdit && (_jsxs(_Fragment, { children: [_jsxs(ContextMenuSub, { children: [_jsx(ContextMenuSubTrigger, { className: 'text-white hover:bg-muted focus:bg-muted cursor-pointer', children: t('devNotes.setStatus') }), _jsxs(ContextMenuSubContent, { className: 'bg-card border-border rounded-none w-40', children: [_jsx(ContextMenuItem, { onSelect: () => onStatusChange('TODO'), className: 'text-white hover:bg-muted focus:bg-muted cursor-pointer', children: getStatusDisplayName('TODO') }), _jsx(ContextMenuItem, { onSelect: () => onStatusChange('IN_PROGRESS'), className: 'text-white hover:bg-muted focus:bg-muted cursor-pointer', children: getStatusDisplayName('IN_PROGRESS') }), _jsx(ContextMenuItem, { onSelect: () => onStatusChange('RESOLVED'), className: 'text-white hover:bg-muted focus:bg-muted cursor-pointer', children: getStatusDisplayName('RESOLVED') }), _jsx(ContextMenuItem, { onSelect: () => onStatusChange('ARCHIVED'), className: 'text-white hover:bg-muted focus:bg-muted cursor-pointer', children: getStatusDisplayName('ARCHIVED') }), _jsx(ContextMenuItem, { onSelect: () => onStatusChange('CANCELLED'), className: 'text-white hover:bg-muted focus:bg-muted cursor-pointer', children: getStatusDisplayName('CANCELLED') })] })] }), _jsx(ContextMenuItem, { onSelect: onDelete, className: 'text-red-400 hover:bg-muted focus:bg-muted cursor-pointer', children: t('actions.delete') })] }))] })] }));
};
